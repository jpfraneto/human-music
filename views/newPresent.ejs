<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/newPresentStyle.css">
    <title>Human Music BETA</title>
</head>
<body>

<div class="modal" tabindex="-1" role="dialog" id="loginModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Login</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h5>If you have an account, here you can login. If not, you can register <a href="/register">here</a></h5>
                <form action="/login" method="POST">
                    <div class="row align-items-center">
                        <div class="col-12" style="margin-bottom: 16px;">
                            <label for="loginUsername" class="clock">Username</label>
                            <input type="text" name="username" placeholder="Username" id="loginUsername" required>
                            <label for="loginPassword" class="clock">Password</label>
                            <input type="password" name="password" placeholder="Password" id="loginPassword" required>
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-success">Login</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="exampleModalLabel">Add New Recommendation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/" method="POST">
                <div class="form-group">
                    <label for="videoURL" class="col-form-label">Youtube URL of your recommendation [https://www.youtube.com/watch?v=ZOu3aJ8RDqw]:</label>
                    <input class="form-control" id="videoURL" type="text" name="url">
                </div>
                <div class="form-group">
                    <label for="descriptionTextArea" class="col-form-label">What does this piece mean to you?</label>
                    <textarea class="form-control" rows="10" cols="33" id="descriptionTextArea" name="description"></textarea>
                </div>
                <div class="form group">
                    <label for="userCheckbox" class="col-form-label">Was this created by you?</label>    
                    <input type="checkbox" id="userCheckbox" name="wasCreatedByUser" value="true">
                </div>
                <div class="form group"></div>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Add Recommendation</button>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container text-center">
    <div class="navigationBar">
        <p><span id="pastSpan"><a href="/past">PAST</a></span><span id="presentSpan" class="activeTense"><a href="/">PRESENT</a></span><span id="futureSpan"><a href="/future">FUTURE</a></span></p>
    </div>
    <div class="clock">
        <p><%= today %> | <span id="presentClock">88:88:88</span></p>
    </div>
</div>

<div class="box">
    <div class="column left"></div>
    <div id="middleColumn" class="column middle text-center">

        <div class="iFrameContainer" id="mediaContainer">
            <iframe id="presentPlayer" width="640" height="360"
            src="https://www.youtube.com/embed/<%= presentRecommendation.youtubeID %>?start=<%=elapsedSeconds%>&autoplay=1&enablejsapi=1&mute=1&controls=0"
            style="border: solid 4px #37474F"
            allow="autoplay"
            ></iframe>
        </div>

        <div class="controls" id="controlsDiv" style="visibility: hidden;">
            <button class="btn btn-success btn-sm" id="addFavoriteButton" style="display: none;">Add Favorite</button>
            <button class="btn btn-danger btn-sm" id="removeFavoriteButton" style="display: none;">Remove Favorite</button>
            <% if(!currentUser){ %>
                <a class="btn btn-success btn-sm" href="#" data-toggle="modal" data-target="#loginModal">Favorites</a>
            <% } %>
            <!-- <button class="btn btn-dark btn-sm" id="muteButton" style="visibility: hidden;">(un)Mute</button> -->
            <button class="btn btn-dark btn-sm" id="fullscreenButton" style="visibility: hidden;">Fullscreen</button>
            <!-- <button class="btn btn-dark btn-sm" id="volumeDown" style="visibility: hidden;"><i class="fas fa-volume-down"></i></button> -->
            <button class="btn btn-dark btn-sm" id="volumeDisplay" style="visibility: hidden;"><span id="volumeIcon"><i class="fas fa-volume-mute"></i></span> <span id="currentVolume">00</span></button>
            <!-- <button class="btn btn-dark btn-sm" id="volumeUp" style="visibility: hidden;"><i class="fas fa-volume-up"></i></button> -->
            <input id="vol-control" type="range" min="0" max="100" value="100" step="1" oninput="SetVolume(this.value)" onchange="SetVolume(this.value)"></input>
        </div>

        <p id="recommendationBottomMessage">This recommendation ends at <%= endingTime %></p>
        <hr>
        <div id="presentRecommendationInformation">
            <p><strong>User: </strong>@<span id="username"><%= presentRecommendation.author.username %></span></p>
            <p><strong>Country of Identification: </strong><span id="userCountry"><%= presentRecommendation.author.country %></span></p>
            <p><strong>Date of Recommendation: </strong><span id="dateOfRecommendation"><%= presentRecommendation.recommendationDate %></span></p>
            <p><strong>Name: </strong><span id="recommendationName"><%= presentRecommendation.name %></span></p>
            <p><strong>Why did you recommend it?: </strong><span id="recommendationDescription"><%= presentRecommendation.description %></span></p>
        </div>

        <div id="voidInformation" style="display: none;">
            <p><strong><span id="nasaTitle"></span></strong></p>
            <p><strong>Date: </strong><span id="nasaDate"></span></p>
            <p><strong>Explanation: </strong><span id="nasaExplanation"></span></p>
        </div>
    </div>
    <div class="column right"></div>
</div>
<div class="footer">
    <% if (!currentUser){ %>
        <a href="#" data-toggle="modal" data-target="#loginModal">Login</a>
        <a href="/register">Register</a>
    <% } %>
    <% if (currentUser) { %>
        <a href="/logout">Log Out</a>
        <a href="/users/<%=currentUser.username%>">@<span id="currentUserSpan"><%=currentUser.username%></span></a>
    <% } %>
    <a href="#" data-toggle="modal" data-target="#exampleModal">Add Recommendation</a>
    <a href="/about">About</a>
    <a href="/future/feedback">Feedback</a>

</div>



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="/scripts/presentScript.js"></script>
</body>
</html>