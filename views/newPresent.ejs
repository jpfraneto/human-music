<%- include("./partials/header") %>

<div class="container text-center">
    <div class="navigationBar">
        <p><span id="pastSpan"><a href="/past">PAST</a></span><span id="presentSpan" class="activeTense"><a href="/">PRESENT</a></span><span id="futureSpan"><a href="/future">FUTURE</a></span></p>
    </div>
    <div class="clock">
        <p><%= today %> | <span id="presentClock">88:88:88</span></p>
    </div>
</div>

<div class="box">
    <div class="column left"></div>
    <div id="middleColumn" class="column middle text-center">

        <div class="iFrameContainer" id="mediaContainer">
            <iframe id="presentPlayer" width="640" height="360"
            src="https://www.youtube.com/embed/<%= presentRecommendation.youtubeID %>?start=<%=elapsedSeconds%>&autoplay=1&enablejsapi=1&mute=1&controls=0"
            style="border: solid 4px #37474F"
            allow="autoplay"
            ></iframe>
        </div>

        <div class="controls" id="controlsDiv" style="visibility: hidden;">
            <button class="btn btn-success btn-sm" id="addFavoriteButton" style="display: none;">Add Favorite</button>
            <button class="btn btn-danger btn-sm" id="removeFavoriteButton" style="display: none;">Remove Favorite</button>
            <% if(!currentUser){ %>
                <a class="btn btn-success btn-sm" href="/login">Favorites</a>
            <% } %>
            <button class="btn btn-dark btn-sm" id="fullscreenButton" style="visibility: hidden;">Fullscreen</button>
            <div class="volumeControls" id="volumeControls">
                <button class="btn btn-dark btn-sm" id="volumeDisplay" style="visibility: hidden;"><span id="volumeIcon"><i class="fas fa-volume-mute"></i></span> <span id="currentVolume">00</span></button>
                <input id="vol-control" type="range" min="0" max="100" value="100" step="1" oninput="SetVolume(this.value)" onchange="SetVolume(this.value)"></input>
            </div>
        </div>

        <p id="recommendationBottomMessage">This recommendation ends at: <%= endingTime %></p>
        <hr>
        <div id="presentRecommendationInformation">
            <p><strong>User: </strong>@<span id="username"><%= presentRecommendation.author.username %></span></p>
            <p><strong>Country: </strong><span id="userCountry"><%= presentRecommendation.author.country %></span></p>
            <p><strong>Date of Recommending: </strong><span id="dateOfRecommendation"><%= presentRecommendation.recommendationDate %></span></p>
            <p><strong>Name: </strong><span id="recommendationName"><%= presentRecommendation.name %></span></p>
            <p><strong>Why did you recommend this?: </strong><span id="recommendationDescription"><%= presentRecommendation.description %></span></p>
        </div>

        <div id="voidInformation" style="display: none;">
            <p><strong><span id="nasaTitle"></span></strong></p>
            <p><strong>Fecha: </strong><span id="nasaDate"></span></p>
            <p><strong>Explicaci√≥n: </strong><span id="nasaExplanation"></span></p>
        </div>
    </div>
    <div class="column right"></div>
</div>

<div class="footer">
    <% if (!currentUser){ %>
        <a href="/login">Login</a>
        <a href="/register">Register</a>
    <% } %>
    <% if (currentUser) { %>
        <a href="/logout">Log Out</a>
        <a href="/users/<%=currentUser.username%>">@<span id="currentUserSpan"><%=currentUser.username%></span></a>
    <% } %>
    <a href="/recommendations/new">Add Recommendation</a>
    <a id="emailTag" href="mailto:hola@human-music.com">hola@human-music.com</a>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="/scripts/presentScript.js"></script>
</body>
</html>