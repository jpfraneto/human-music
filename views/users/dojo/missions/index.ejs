<%- include ("../../../partials/users/userHeader") %>

<div class="container text-center">
    <h1>This is the missions page of <%=username%></h1>
    <p>The idea for this place is that the user can come and write down what needs to be done in order to make progress</p>
</div>

<div class="table-responsive missionsTableDiv">
    <table class="table">
        <thead>
            <tr>
                <th style="width: 13%" scope="col">Mission Date</th>
                <th style="width: 57%" scope="col">Name</th>
                <th style="width: 10%" scope="col">Completed?</th>
                <th style="width: 10%" scope="col">Edit</th>
                <th style="width: 10%" scope="col">Delete</th>
            </tr>
        </thead>
        <tbody>
            <% foundMissions.forEach((mission) => { %>
                <tr>
                    <td><%=mission.date%></td>
                    <td><a href="/users/<%=username%>/dojo/missions/<%=mission._id%>"><%=mission.name%></a></td>
                    <td><%=mission.isReady%></td>
                    <td><a class="btn btn-xs btn-success" role="button" href="/users/<%=username%>/dojo/missions/<%=mission._id%>/edit"><i class="fas fa-edit"></i></a></td>
                    <form class="delete-form" id="delete-form" action="/users/<%=username%>/dojo/missions/<%=mission._id%>?_method=DELETE" method="POST">
                        <td><button type="submit" class="btn btn-xs btn-danger" onclick="return confirm('Are you sure you want to delete this item?');"><i class="fas fa-trash-alt"></i></button></td>
                    </form>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>

<div class="text-center dojoBackButton">
    <a class="btn btn-primary" role="button" href="/users/<%=username%>/dojo/missions/new">Add new mission</a>
    <a class="btn btn-success" role="button" href="/users/<%=username%>/dojo">Back to the Dojo</a>
</div>

<%- include ("../../../partials/users/userFooter") %>